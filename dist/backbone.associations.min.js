/**
 * Backbone.Associations v0.1.0
 * https://github.com/DreamTheater/Backbone.Associations
 *
 * Copyright Â© 2012 Dmytro Nemoga
 * Released under the MIT license.
 */
(function(){"use strict";var a=Backbone.Model;_.extend(a.prototype,{belongsTo:{},hasMany:{},hasOne:{},toJSON:_.wrap(a.prototype.toJSON,function(a,b){b=_.extend({associations:!1},b);var c=a.call(this,b);return!b.associations,c})});var b=Backbone.Collection;_.extend(b.prototype,{});var c=Backbone.BelongsTo=function(a){};_.extend(c.prototype,{});var d=Backbone.HasMany=function(a){};_.extend(d.prototype,{});var e=Backbone.HasOne=function(a){};_.extend(e.prototype,{}),Backbone.sync=_.wrap(Backbone.sync,function(a,b,c,d){if(b!=="read")return a.call(this,b,c,d);d=_.extend({},d);var e=$.Deferred(),f=[],g=_.bind(function(a,b,c){delete this._xhrCache,_.isFunction(a)&&a.call(this,this,b,c)},this),h=_.bind(function(a,b,c,f){e.resolve(b,c,f),_.isFunction(a)&&a.call(this,this,b,d)},this),i=_.bind(function(a,b,c,f){e.reject(b,c,f),_.isFunction(a)&&a.call(this,this,b,d)},this),j=_.bind(function(){_.isUndefined(this._xhrCache)?this._xhrCache=a.call(this,"read",c,d):this._xhrCache.then(e.resolve,e.reject)},this);return _.extend(d,{complete:_.wrap(d.complete,g),success:_.wrap(d.success,h),error:_.wrap(d.error,i)}),$.when.apply($,f).then(j),e.promise()})})(),function(){"use strict";var a=Backbone.BelongsTo=function(a){};_.extend(a.prototype,{})}(),function(){"use strict";var a=Backbone.Collection;_.extend(a.prototype,{})}(),function(){"use strict";var a=Backbone.HasMany=function(a){};_.extend(a.prototype,{})}(),function(){"use strict";var a=Backbone.HasOne=function(a){};_.extend(a.prototype,{})}(),Backbone.sync=_.wrap(Backbone.sync,function(a,b,c,d){if(b!=="read")return a.call(this,b,c,d);d=_.extend({},d);var e=$.Deferred(),f=[],g=_.bind(function(a,b,c){delete this._xhrCache,_.isFunction(a)&&a.call(this,this,b,c)},this),h=_.bind(function(a,b,c,f){e.resolve(b,c,f),_.isFunction(a)&&a.call(this,this,b,d)},this),i=_.bind(function(a,b,c,f){e.reject(b,c,f),_.isFunction(a)&&a.call(this,this,b,d)},this),j=_.bind(function(){_.isUndefined(this._xhrCache)?this._xhrCache=a.call(this,"read",c,d):this._xhrCache.then(e.resolve,e.reject)},this);return _.extend(d,{complete:_.wrap(d.complete,g),success:_.wrap(d.success,h),error:_.wrap(d.error,i)}),$.when.apply($,f).then(j),e.promise()});